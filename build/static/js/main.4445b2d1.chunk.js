(this.webpackJsonpeatwow=this.webpackJsonpeatwow||[]).push([[0],{205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},211:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(9),r=n.n(s),i=n(48),l=n(49),o=n(54),u=n(52),d=n(11),j=n(33),f=n(34),b=n.n(f),h=n(15),p=function(e){return{type:"ALLTAGS",data:e}},O=n(10),g=d.h.Item,v=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={visible:!0,selected:"",username:"",userid:""},e.onSelect=function(t){d.f.prompt("\u5f00\u95e8\uff01\u8fce\u5ba2\uff01","\u5ba2\u5b98\uff01\u60a8\u6765\u4e86\uff01",(function(t,n){if(t&&n){console.log("login: ".concat(t,", password: ").concat(n));var c={username:t,password:n};console.log(c),j.Axios.post("http://116.62.128.248:80/signin",b.a.stringify(c)).then((function(e){return e.data})).then((function(t){var n=t.sendTags,c=t.userid,a=t.msg;d.f.alert("\u561f\u561f",a),e.props.allTags(n),e.props.sendId(c)}))}else d.f.alert("\u54ce\u5440","\u4fe1\u606f\u586b\u5199\u4e0d\u5b8c\u6574\u554a\uff0c\u5c0f\u4e8c\u627e\u4e0d\u5230\u60a8\u5462")}),"login-password",null,["\u8bf7\u8f93\u5165\u7528\u6237\u540d","\u8bf7\u8f93\u5165\u5bc6\u7801"]),e.setState({visible:!1,selected:t.props.value})},e.handleVisibleChange=function(t){e.setState({visible:t})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{children:Object(O.jsx)(d.g,{mode:"light",rightContent:Object(O.jsx)(d.h,{overlayClassName:"fortest",overlayStyle:{color:"currentColor"},visible:this.state.visible,overlay:[Object(O.jsx)(g,{value:"scan",icon:(e="tOtXhkIWzwotgGSeptou",Object(O.jsx)("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/".concat(e,".svg"),className:"am-icon am-icon-xs",alt:""})),"data-seed":"logId",children:"\u767b\u5f55"},"4"),,],align:{overflow:{adjustY:0,adjustX:0},offset:[-10,0]},onVisibleChange:this.handleVisibleChange,onSelect:this.onSelect,children:Object(O.jsx)("div",{style:{height:"100%",padding:"0 15px",marginRight:"-15px",display:"flex",alignItems:"center"},children:Object(O.jsx)(d.b,{type:"ellipsis"})})}),children:"\u5403\u4ec0\u4e48\u554a"})});var e}}]),n}(a.a.Component),m=Object(h.b)((function(e){return e}),{allTags:p,sendId:function(e){return{type:"ID",data:e}}})(v),x=n(53),y=n(19),w=(n(205),Object(h.b)((function(e){return e}),{tags:function(e){return{type:"TAGS",data:e}}})((function(e){var t=Object(c.useState)([]),n=Object(y.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(["1","2"]),i=Object(y.a)(r,2),l=i[0],o=i[1];return Object(c.useEffect)((function(){o(e.allTags)}),[e.allTags]),Object(c.useEffect)((function(){e.tags(a)}),[a]),Object(O.jsx)("div",{className:"scriptsArea",children:Object(O.jsx)("div",{className:"tag-container selectedBox",children:l.map((function(e){return Object(O.jsx)(d.i,{onChange:(t=e,function(e){s(e?[].concat(Object(x.a)(a),[t]):a.filter((function(e){return e!==t})))}),children:e},e);var t}))})})}))),S=(n(206),Object(h.b)((function(e){return e}))((function(e){return Object(O.jsxs)("div",{className:"picArea",children:[Object(O.jsx)("div",{className:"pic",children:Object(O.jsx)("img",{src:e.randomMeal.picUrl})}),Object(O.jsxs)("div",{className:"defaultText",children:["\u4eca\u5929\u5403",e.randomMeal.mealName?e.randomMeal.mealName:"\u5565\uff1f"]})]})}))),C=(n(207),Object(h.b)((function(e){return e}),{meal:function(e){return{type:"MEAL",data:e}}})((function(e){var t=Object(c.useState)([]),n=Object(y.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(y.a)(r,2),l=i[0],o=i[1];return Object(c.useEffect)((function(){o(e.sendId),s(e.tags)})),Object(O.jsx)("div",{children:Object(O.jsx)(d.a,{className:"btn",type:"primary",size:"large",onClick:function(){var t={userid:l,tags:a};console.log("*(",l),console.log("\u53d1\u9001",t),j.Axios.post("http://116.62.128.248:80/randommeal",b.a.stringify(t)).then((function(e){return JSON.parse(e.data)})).then((function(t){console.log("\u6536\u5230",t),e.meal(t)}))},children:"\u5f00\u59cb"})})}))),A=(n(208),n(209),[]),I=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={files:A},e.onChange=function(t,n,c){e.props.getUrl(t[0].url),e.setState({files:t})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.files;return Object(O.jsx)(d.c,{className:"imgpick",length:"1",files:e,onChange:this.onChange,selectable:e.length<1,onAddImageClick:this.onAddImageClick,disableDelete:!0})}}]),n}(a.a.Component),N=Object(h.b)((function(e){return e}),{allTags:p})((function(e){var t=Object(c.useState)(!1),n=Object(y.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(y.a)(r,2),l=i[0],o=i[1],u=Object(c.useState)(""),f=Object(y.a)(u,2),h=f[0],p=f[1],g=Object(c.useRef)(null),v=Object(c.useRef)(null),m=Object(c.useRef)(null);Object(c.useEffect)((function(){p(e.sendId)}));var x=function(){var t=g.current.state.value;if(t){var n=v.current.state.value.split(" "),c=m.current.state.value;console.log(h);var a={userid:h,mealName:t,picUrl:l,tags:n,description:c};j.Axios.post("http://116.62.128.248:80/addmeal",b.a.stringify(a)).then((function(e){return d.j.success("\u597d\u8036\uff0c\u4e0a\u4f20\u6210\u529f",1),s(!1),e.data})).then((function(t){console.log(t),e.allTags(t)})),d.j.loading("\u5ba2\u89c2\uff0c\u7a0d\u7b49\u7247\u523b\uff01",1,(function(){console.log("Load complete !!!"),s(!1)}))}else d.f.alert("\u672a\u586b\u5199\u540d\u79f0","\u5ba2\u5b98\uff0c\u7ec8\u6b62\u4e0a\u4f20\u5417\uff1f",[{text:"\u5b8c\u5584\u4e00\u4e0b",onPress:function(){return console.log("cancel")}},{text:"\u6e9c\u4e86\u6e9c\u4e86",onPress:function(){d.j.info("\u53d6\u6d88\u4e0a\u4f20\u54af",1),s(!1)}}])};return Object(O.jsxs)("div",{children:[Object(O.jsx)(d.a,{className:"btn",type:"primary",size:"large",onClick:function(e){e.preventDefault(),s(!0)},children:"\u6dfb\u52a0"}),Object(O.jsx)(d.f,{popup:!0,visible:a,onClose:x,animationType:"slide-up",afterClose:function(){},children:Object(O.jsxs)(d.e,{renderHeader:function(){return Object(O.jsx)("div",{children:"\u6dfb\u52a0\u83dc\u54c1"})},className:"popup-list ",children:[Object(O.jsx)(d.e.Item,{children:Object(O.jsx)(I,{getUrl:function(e){o(e)}})}),Object(O.jsx)(d.d,{ref:g,autofocus:!0,clear:!0,placeholder:"auto focus",children:"\u540d\u79f0"}),Object(O.jsx)(d.d,{ref:v,autofocus:!0,clear:!0,placeholder:"\u7a7a\u683c\u7b26\u5206\u9694\u6807\u7b7e\uff0c\u53ef\u4e0d\u586b",children:"\u6807\u7b7e"}),Object(O.jsx)(d.d,{ref:m,autofocus:!0,clear:!0,placeholder:"\u53ef\u4e0d\u586b",children:"\u63cf\u8ff0"}),Object(O.jsx)(d.e.Item,{children:Object(O.jsx)(d.a,{type:"primary",onClick:x,children:"\u4e0a\u4f20"})})]})})]})}));var T=function(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(m,{}),Object(O.jsx)(w,{}),Object(O.jsx)(S,{}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(O.jsx)(C,{}),Object(O.jsx)(N,{})]})]})},k=n(25),M=n(108),E=n(109),L=n(55);var D=Object(k.combineReducers)({randomMeal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MEAL":return Object(L.a)({},t.data);default:return e}},tags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TAGS":return Object(L.a)({},t.data);default:return e}},allTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALLTAGS":return Object(x.a)(t.data);default:return e}},sendId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ID":return t.data;default:return e}}}),G=Object(k.createStore)(D,Object(E.composeWithDevTools)(Object(k.applyMiddleware)(M.a)));n(210);r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(h.a,{store:G,children:Object(O.jsx)(T,{})})}),document.getElementById("root"))},33:function(e,t,n){var c=n(182);t.Axios=c.create({headers:{"content-type":"application/x-www-form-urlencoded"}})}},[[211,1,2]]]);
//# sourceMappingURL=main.4445b2d1.chunk.js.map